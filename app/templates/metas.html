<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Metas - VELOZ FIBRA</title>
    <script>
        // Sistema de Metas - JavaScript Puro
        window.metasApp = {
            activeTab: 'goals',
            goals: [],
            collaborators: [],
            sectors: [],
            
            // Vari√°veis de estado
            editingCommission: null,
            viewingCommission: false,
            
            // Fun√ß√£o para carregar dados do localStorage
            loadData: function() {
                const savedGoals = localStorage.getItem('metas_goals');
                const savedCollaborators = localStorage.getItem('metas_collaborators');
                const savedSectors = localStorage.getItem('metas_sectors');
                
                if (savedGoals) {
                    this.goals = JSON.parse(savedGoals);
                } else {
                    // Dados padr√£o apenas se n√£o existirem dados salvos
                    this.goals = [
                        { id: '1', title: 'Meta de Vendas - Q1 2024', description: 'Aumentar vendas em 20%', sectorId: '2', type: 'vendas', priority: 'alta', target: 'R$ 500.000', status: 'in_progress', progress: 60 },
                        { id: '2', title: 'Meta de Atendimento - Fevereiro', description: 'Manter satisfa√ß√£o acima de 90%', sectorId: '3', type: 'atendimento', priority: 'media', target: '90% satisfa√ß√£o', status: 'completed', progress: 95 },
                        { id: '3', title: 'Meta de Marketing - Mar√ßo', description: 'Gerar 500 leads qualificados', sectorId: '5', type: 'marketing', priority: 'alta', target: '500 leads', status: 'in_progress', progress: 40 }
                    ];
                }
                
                if (savedCollaborators) {
                    this.collaborators = JSON.parse(savedCollaborators);
                } else {
                    // Dados padr√£o apenas se n√£o existirem dados salvos
                    this.collaborators = [
                        { id: '1', name: 'Jo√£o Silva', email: 'joao.silva@velozfibra.com', sectorId: '2', position: 'Vendedor', phone: '(11) 99999-1111', status: 'ativo' },
                        { id: '2', name: 'Maria Santos', email: 'maria.santos@velozfibra.com', sectorId: '3', position: 'Atendente', phone: '(11) 99999-2222', status: 'ativo' },
                        { id: '3', name: 'Pedro Costa', email: 'pedro.costa@velozfibra.com', sectorId: '4', position: 'T√©cnico', phone: '(11) 99999-3333', status: 'ativo' }
                    ];
                }
                
                if (savedSectors) {
                    this.sectors = JSON.parse(savedSectors);
                } else {
                    // Dados padr√£o apenas se n√£o existirem dados salvos
                    this.sectors = [
                        { id: '1', name: 'Administrativo', description: 'Setor administrativo', manager: 'Ana Silva', budget: 'R$ 50.000', location: 'Andar 1 - Sala 101', status: 'ativo' },
                        { id: '2', name: 'Vendas', description: 'Setor de vendas e prospec√ß√£o', manager: 'Jo√£o Silva', budget: 'R$ 100.000', location: 'Andar 2 - Sala 201', status: 'ativo' },
                        { id: '3', name: 'Atendimento', description: 'Setor de atendimento ao cliente', manager: 'Maria Santos', budget: 'R$ 30.000', location: 'Andar 1 - Sala 102', status: 'ativo' },
                        { id: '4', name: 'T√©cnico', description: 'Setor t√©cnico e suporte', manager: 'Pedro Costa', budget: 'R$ 80.000', location: 'Andar 3 - Sala 301', status: 'ativo' },
                        { id: '5', name: 'Marketing', description: 'Setor de marketing e comunica√ß√£o', manager: 'Carlos Lima', budget: 'R$ 60.000', location: 'Andar 2 - Sala 202', status: 'ativo' },
                        { id: '6', name: 'Financeiro', description: 'Setor financeiro e administrativo', manager: 'Lucia Santos', budget: 'R$ 40.000', location: 'Andar 1 - Sala 103', status: 'ativo' }
                    ];
                }
            },
            
            // Fun√ß√£o para salvar dados no localStorage
            saveData: function() {
                localStorage.setItem('metas_goals', JSON.stringify(this.goals));
                localStorage.setItem('metas_collaborators', JSON.stringify(this.collaborators));
                localStorage.setItem('metas_sectors', JSON.stringify(this.sectors));
            },
            
            // Fun√ß√£o para adicionar meta
            addGoal: function() {
                const title = document.getElementById('goalTitle').value;
                const description = document.getElementById('goalDescription').value;
                const sectorId = document.getElementById('goalSector').value;
                const type = document.getElementById('goalType').value;
                const priority = document.getElementById('goalPriority').value;
                const target = document.getElementById('goalTarget').value;
                
                if (!title || !sectorId) {
                    alert('Por favor, preencha os campos obrigat√≥rios');
                    return;
                }
                
                const goal = {
                    id: Date.now().toString(),
                    title: title,
                    description: description,
                    sectorId: sectorId,
                    type: type,
                    priority: priority,
                    target: target,
                    status: 'in_progress',
                    progress: 0
                };
                
                this.goals.push(goal);
                
                // Limpar formul√°rio
                document.getElementById('goalTitle').value = '';
                document.getElementById('goalDescription').value = '';
                document.getElementById('goalSector').value = '';
                document.getElementById('goalType').value = '';
                document.getElementById('goalPriority').value = '';
                document.getElementById('goalTarget').value = '';
                
                // Salvar dados
                this.saveData();
                
                // Recarregar lista
                this.loadGoals();
                
                alert('Meta adicionada com sucesso!');
            },
            
            // Fun√ß√£o para carregar metas
            loadGoals: function() {
                const container = document.querySelector('#goals-content .space-y-4');
                if (container) {
                    container.innerHTML = '';
                    this.goals.forEach(goal => {
                        const goalElement = document.createElement('div');
                        goalElement.className = 'p-4 border border-gray-200 dark:border-gray-700 rounded-lg';
                        goalElement.innerHTML = `
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <h5 class="font-medium text-gray-900 dark:text-gray-100">${goal.title}</h5>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">${goal.description}</p>
                                    <div class="mt-2 text-sm text-gray-500 dark:text-gray-400">
                                        <span>Setor: ${this.getSectorName(goal.sectorId)}</span> | 
                                        <span>Tipo: ${goal.type}</span> | 
                                        <span>Prioridade: ${goal.priority}</span> | 
                                        <span>Meta: ${goal.target}</span>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-medium text-gray-900 dark:text-gray-100">${goal.progress}%</div>
                                    <div class="w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: ${goal.progress}%"></div>
                                    </div>
                                </div>
                            </div>
                        `;
                        container.appendChild(goalElement);
                    });
                }
            },
            
            // Fun√ß√£o para carregar setores no select
            loadSectorsToSelect: function() {
                const sectorSelect = document.getElementById('goalSector');
                if (sectorSelect) {
                    sectorSelect.innerHTML = '<option value="">Selecione o setor</option>';
                    this.sectors.forEach(sector => {
                        const option = document.createElement('option');
                        option.value = sector.id;
                        option.textContent = sector.name;
                        sectorSelect.appendChild(option);
                    });
                }
            },
            
            // Fun√ß√£o para obter nome do setor
            getSectorName: function(sectorId) {
                const sector = this.sectors.find(s => s.id === sectorId);
                return sector ? sector.name : 'Setor n√£o encontrado';
            },
            
            // Fun√ß√£o para mostrar aba
            showTab: function(tabName) {
                this.activeTab = tabName;
                
                // Esconder todos os conte√∫dos
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.style.display = 'none';
                });
                
                // Mostrar conte√∫do da aba selecionada
                const content = document.getElementById(tabName + '-content');
                if (content) {
                    content.style.display = 'block';
                }
                
                // Atualizar bot√µes
                document.querySelectorAll('[data-tab]').forEach(btn => {
                    btn.classList.remove('border-blue-500', 'text-blue-600');
                    btn.classList.add('border-transparent', 'text-gray-500');
                });
                
                const activeBtn = document.querySelector('[data-tab="' + tabName + '"]');
                if (activeBtn) {
                    activeBtn.classList.remove('border-transparent', 'text-gray-500');
                    activeBtn.classList.add('border-blue-500', 'text-blue-600');
                }
            },
            
            // Fun√ß√£o para mostrar formul√°rio de setor
            showSectorForm: function() {
                document.getElementById('sectorForm').style.display = 'block';
            },
            
            // Fun√ß√£o para adicionar setor
            addSector: function() {
                const name = document.getElementById('sectorName').value;
                const manager = document.getElementById('sectorManager').value;
                const budget = document.getElementById('sectorBudget').value;
                const location = document.getElementById('sectorLocation') ? document.getElementById('sectorLocation').value : '';
                const status = document.getElementById('sectorStatus') ? document.getElementById('sectorStatus').value : 'ativo';
                const description = document.getElementById('sectorDescription') ? document.getElementById('sectorDescription').value : '';
                
                if (!name || !manager) {
                    alert('Por favor, preencha os campos obrigat√≥rios');
                    return;
                }
                
                const sector = {
                    id: Date.now().toString(),
                    name: name,
                    manager: manager,
                    budget: budget,
                    location: location,
                    status: status,
                    description: description
                };
                
                this.sectors.push(sector);
                
                // Limpar formul√°rio
                document.getElementById('sectorName').value = '';
                document.getElementById('sectorManager').value = '';
                if (document.getElementById('sectorBudget')) document.getElementById('sectorBudget').value = '';
                if (document.getElementById('sectorLocation')) document.getElementById('sectorLocation').value = '';
                if (document.getElementById('sectorStatus')) document.getElementById('sectorStatus').value = 'ativo';
                if (document.getElementById('sectorDescription')) document.getElementById('sectorDescription').value = '';
                
                // Esconder formul√°rio
                document.getElementById('sectorForm').style.display = 'none';
                
                // Salvar dados
                this.saveData();
                
                // Recarregar setores no select de metas
                this.loadSectorsToSelect();
                
                // Recarregar lista de setores
                this.loadSectorsList();
                
                alert('Setor adicionado com sucesso!');
            },
            
            // Fun√ß√£o para cancelar edi√ß√£o de setor
            cancelSectorEdit: function() {
                document.getElementById('sectorForm').style.display = 'none';
                
                // Limpar formul√°rio
                document.getElementById('sectorName').value = '';
                document.getElementById('sectorManager').value = '';
                if (document.getElementById('sectorBudget')) document.getElementById('sectorBudget').value = '';
                if (document.getElementById('sectorLocation')) document.getElementById('sectorLocation').value = '';
                if (document.getElementById('sectorStatus')) document.getElementById('sectorStatus').value = 'ativo';
                if (document.getElementById('sectorDescription')) document.getElementById('sectorDescription').value = '';
            },
            
            // Fun√ß√£o para carregar lista de setores
            loadSectorsList: function() {
                const tbody = document.getElementById('sectorsTableBody');
                if (tbody) {
                    tbody.innerHTML = '';
                    this.sectors.forEach(sector => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900 dark:text-gray-100">${sector.name}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-500 dark:text-gray-400">${sector.manager}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-500 dark:text-gray-400">${sector.location || '-'}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-500 dark:text-gray-400">${sector.budget || '-'}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${sector.status === 'ativo' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'}">${sector.status}</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button onclick="metasApp.editSector('${sector.id}')" class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="metasApp.deleteSector('${sector.id}')" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            },
            
            // Fun√ß√£o para editar setor
            editSector: function(sectorId) {
                const sector = this.sectors.find(s => s.id === sectorId);
                if (sector) {
                    document.getElementById('sectorName').value = sector.name;
                    document.getElementById('sectorManager').value = sector.manager;
                    if (document.getElementById('sectorBudget')) document.getElementById('sectorBudget').value = sector.budget || '';
                    if (document.getElementById('sectorLocation')) document.getElementById('sectorLocation').value = sector.location || '';
                    if (document.getElementById('sectorStatus')) document.getElementById('sectorStatus').value = sector.status || 'ativo';
                    if (document.getElementById('sectorDescription')) document.getElementById('sectorDescription').value = sector.description || '';
                    
                    document.getElementById('sectorForm').style.display = 'block';
                    document.getElementById('sectorButtonText').textContent = 'Atualizar Setor';
                    this.editingSectorId = sectorId;
                }
            },
            
            // Fun√ß√£o para excluir setor
            deleteSector: function(sectorId) {
                if (confirm('Tem certeza que deseja excluir este setor?')) {
                    this.sectors = this.sectors.filter(s => s.id !== sectorId);
                    this.saveData();
                    this.loadSectorsList();
                    this.loadSectorsToSelect();
                    alert('Setor exclu√≠do com sucesso!');
                }
            },
            
            // Fun√ß√£o para mostrar formul√°rio de colaborador
            showCollaboratorForm: function() {
                document.getElementById('collaboratorForm').style.display = 'block';
            },
            
            // Fun√ß√£o para adicionar colaborador
            addCollaborator: function() {
                const name = document.getElementById('collaboratorName').value;
                const email = document.getElementById('collaboratorEmail').value;
                const sectorId = document.getElementById('collaboratorSector').value;
                const position = document.getElementById('collaboratorPosition') ? document.getElementById('collaboratorPosition').value : '';
                const phone = document.getElementById('collaboratorPhone') ? document.getElementById('collaboratorPhone').value : '';
                const status = document.getElementById('collaboratorStatus') ? document.getElementById('collaboratorStatus').value : 'ativo';
                
                if (!name || !email || !sectorId) {
                    alert('Por favor, preencha os campos obrigat√≥rios');
                    return;
                }
                
                const collaborator = {
                    id: Date.now().toString(),
                    name: name,
                    email: email,
                    sectorId: sectorId,
                    position: position,
                    phone: phone,
                    status: status
                };
                
                this.collaborators.push(collaborator);
                
                // Limpar formul√°rio
                document.getElementById('collaboratorName').value = '';
                document.getElementById('collaboratorEmail').value = '';
                document.getElementById('collaboratorSector').value = '';
                if (document.getElementById('collaboratorPosition')) document.getElementById('collaboratorPosition').value = '';
                if (document.getElementById('collaboratorPhone')) document.getElementById('collaboratorPhone').value = '';
                if (document.getElementById('collaboratorStatus')) document.getElementById('collaboratorStatus').value = 'ativo';
                
                // Esconder formul√°rio
                document.getElementById('collaboratorForm').style.display = 'none';
                
                // Salvar dados
                this.saveData();
                
                // Recarregar lista
                this.loadCollaboratorsList();
                
                alert('Colaborador adicionado com sucesso!');
            },
            
            // Fun√ß√£o para carregar lista de colaboradores
            loadCollaboratorsList: function() {
                const tbody = document.querySelector('#collaborators-content tbody');
                if (tbody) {
                    tbody.innerHTML = '';
                    this.collaborators.forEach(collaborator => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900 dark:text-gray-100">${collaborator.name}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-500 dark:text-gray-400">${collaborator.email}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-500 dark:text-gray-400">${collaborator.position || '-'}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-500 dark:text-gray-400">${this.getSectorName(collaborator.sectorId)}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${collaborator.status === 'ativo' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' : collaborator.status === 'inativo' ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200' : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'}">${collaborator.status}</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button onclick="metasApp.editCollaborator('${collaborator.id}')" class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="metasApp.deleteCollaborator('${collaborator.id}')" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            },
            
            // Fun√ß√£o para editar colaborador
            editCollaborator: function(collaboratorId) {
                const collaborator = this.collaborators.find(c => c.id === collaboratorId);
                if (collaborator) {
                    document.getElementById('collaboratorName').value = collaborator.name;
                    document.getElementById('collaboratorEmail').value = collaborator.email;
                    document.getElementById('collaboratorSector').value = collaborator.sectorId;
                    if (document.getElementById('collaboratorPosition')) document.getElementById('collaboratorPosition').value = collaborator.position || '';
                    if (document.getElementById('collaboratorPhone')) document.getElementById('collaboratorPhone').value = collaborator.phone || '';
                    if (document.getElementById('collaboratorStatus')) document.getElementById('collaboratorStatus').value = collaborator.status || 'ativo';
                    
                    document.getElementById('collaboratorForm').style.display = 'block';
                    this.editingCollaboratorId = collaboratorId;
                }
            },
            
            // Fun√ß√£o para excluir colaborador
            deleteCollaborator: function(collaboratorId) {
                if (confirm('Tem certeza que deseja excluir este colaborador?')) {
                    this.collaborators = this.collaborators.filter(c => c.id !== collaboratorId);
                    this.saveData();
                    this.loadCollaboratorsList();
                    alert('Colaborador exclu√≠do com sucesso!');
                }
            },
            
            editCommission(commission) {
                this.editingCommission = commission;
                this.newRenewal = {
                    collaboratorId: commission.collaboratorId,
                    clientName: commission.clientName,
                    contractNumber: commission.contractNumber,
                    renewalDate: commission.renewalDate,
                    previousPlanValue: commission.previousPlan.value,
                    newPlanValue: commission.newPlan.value,
                    commissionType: commission.commissionType || ''
                };
            },
            
            viewCommission(commission) {
                this.viewingCommission = commission;
            },
            
            deleteCommission(commissionId) {
                if (confirm('Tem certeza que deseja excluir esta comiss√£o?')) {
                    this.renewals = this.renewals.filter(r => r.id !== commissionId);
                    this.saveData();
                }
            },
            
            cancelCommissionEdit() {
                this.editingCommission = null;
                this.newRenewal = {
                    collaboratorId: '',
                    clientName: '',
                    contractNumber: '',
                    renewalDate: '',
                    previousPlanValue: 0,
                    newPlanValue: 0,
                    commissionType: ''
                };
            },
            
            registerCommission() {
                if (!this.newRenewal.collaboratorId || !this.newRenewal.clientName || !this.newRenewal.commissionType || !this.newRenewal.renewalDate) {
                    alert('Por favor, preencha todos os campos obrigat√≥rios');
                    return;
                }
                
                const collaborator = this.collaborators.find(c => c.id === this.newRenewal.collaboratorId);
                const upgradeValue = Math.max(0, this.newRenewal.newPlanValue - this.newRenewal.previousPlanValue);
                
                const commission = {
                    id: this.editingCommission ? this.editingCommission.id : 'commission_' + Date.now(),
                    collaboratorId: this.newRenewal.collaboratorId,
                    collaboratorName: collaborator ? collaborator.name : 'N√£o informado',
                    clientName: this.newRenewal.clientName,
                    contractNumber: this.newRenewal.contractNumber,
                    renewalDate: this.newRenewal.renewalDate,
                    previousPlan: { name: 'Plano Anterior', value: this.newRenewal.previousPlanValue },
                    newPlan: { name: 'Novo Plano', value: this.newRenewal.newPlanValue },
                    upgradeValue: upgradeValue,
                    commissionValue: upgradeValue + 3, // Comiss√£o base + upgrade
                    commissionType: this.newRenewal.commissionType,
                    status: this.editingCommission ? this.editingCommission.status : 'valid',
                    paymentStatus: this.editingCommission ? this.editingCommission.paymentStatus : 'paid',
                    createdAt: this.editingCommission ? this.editingCommission.createdAt : new Date().toISOString()
                };
                
                if (this.editingCommission) {
                    // Atualizar comiss√£o existente
                    const index = this.renewals.findIndex(r => r.id === this.editingCommission.id);
                    if (index !== -1) {
                        this.renewals[index] = commission;
                    }
                    this.editingCommission = null;
                    alert('Comiss√£o atualizada com sucesso!');
                } else {
                    // Adicionar nova comiss√£o
                    this.renewals.push(commission);
                    alert('Comiss√£o registrada com sucesso!');
                }
                
                // Limpar formul√°rio
                this.newRenewal = {
                    collaboratorId: '',
                    clientName: '',
                    contractNumber: '',
                    renewalDate: '',
                    previousPlanValue: 0,
                    newPlanValue: 0,
                    commissionType: ''
                };
                
                this.saveData();
            }
        };
        
        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Sistema de Metas carregado');
            
            // Carregar dados salvos
            metasApp.loadData();
            
            // Carregar interfaces
            metasApp.loadSectorsToSelect();
            metasApp.loadGoals();
            metasApp.loadSectorsList();
            metasApp.loadCollaboratorsList();
            metasApp.showTab('goals');
            
            // Adicionar event listeners para as abas
            document.querySelectorAll('[data-tab]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tab = this.getAttribute('data-tab');
                    metasApp.showTab(tab);
                });
            });
        });
        
        // Fun√ß√£o global para limpar todos os dados
        function clearAllData() {
            if (confirm('Tem certeza que deseja limpar todos os dados? Isso ir√° remover todas as metas, colaboradores, setores e comiss√µes cadastradas.')) {
                localStorage.removeItem('metas_goals');
                localStorage.removeItem('metas_collaborators');
                localStorage.removeItem('metas_sectors');
                localStorage.removeItem('metas_renewals');
                alert('Dados limpos com sucesso! A p√°gina ser√° recarregada.');
                location.reload(); // Recarrega a p√°gina para voltar aos dados padr√£o
            }
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .font-poppins { font-family: 'Poppins', sans-serif; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .animate-scale-in { animation: scaleIn 0.5s ease-out; }
        .animate-delay-100 { animation-delay: 0.1s; }
        .animate-delay-200 { animation-delay: 0.2s; }
        .animate-delay-300 { animation-delay: 0.3s; }
        .animate-delay-400 { animation-delay: 0.4s; }
        .animate-delay-500 { animation-delay: 0.5s; }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        .gradient-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-success { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .gradient-warning { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .gradient-info { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
    </style>
    
    <!-- SCRIPT DE CORRE√á√ÉO DO SISTEMA DE METAS -->
    <script>
        // SISTEMA DE METAS - CORRE√á√ïES E MELHORIAS
        // ===========================================
        
        // Fun√ß√µes de corre√ß√£o para o sistema de metas
        window.metasFix = {
            
            // Corrigir carregamento de setores nos selects
            fixSectorSelects: function() {
                console.log('üîß Corrigindo selects de setores...');
                
                // Corrigir select de metas
                const goalSectorSelect = document.getElementById('goalSector');
                if (goalSectorSelect) {
                    goalSectorSelect.innerHTML = '<option value="">Selecione o setor</option>';
                    window.metasApp.sectors.forEach(sector => {
                        const option = document.createElement('option');
                        option.value = sector.id;
                        option.textContent = sector.name;
                        goalSectorSelect.appendChild(option);
                    });
                }
                
                // Corrigir select de colaboradores
                const collaboratorSectorSelect = document.querySelector('select[x-model="newCollaborator.sectorId"]');
                if (collaboratorSectorSelect) {
                    collaboratorSectorSelect.innerHTML = '<option value="">Selecione o setor</option>';
                    window.metasApp.sectors.forEach(sector => {
                        const option = document.createElement('option');
                        option.value = sector.id;
                        option.textContent = sector.name;
                        collaboratorSectorSelect.appendChild(option);
                    });
                }
                
                console.log('‚úÖ Selects de setores corrigidos!');
            },
            
            // Corrigir formul√°rio de colaboradores
            fixCollaboratorForm: function() {
                console.log('üîß Corrigindo formul√°rio de colaboradores...');
                
                // Substituir Alpine.js por vanilla JS
                const collaboratorForm = document.getElementById('collaboratorForm');
                if (collaboratorForm) {
                    // Corrigir inputs
                    const nameInput = document.getElementById('collaboratorName');
                    const emailInput = document.querySelector('input[x-model="newCollaborator.email"]');
                    const positionInput = document.querySelector('input[x-model="newCollaborator.position"]');
                    const sectorSelect = document.querySelector('select[x-model="newCollaborator.sectorId"]');
                    const phoneInput = document.querySelector('input[x-model="newCollaborator.phone"]');
                    const statusSelect = document.querySelector('select[x-model="newCollaborator.status"]');
                    
                    // Adicionar IDs se n√£o existirem
                    if (emailInput && !emailInput.id) emailInput.id = 'collaboratorEmail';
                    if (positionInput && !positionInput.id) positionInput.id = 'collaboratorPosition';
                    if (sectorSelect && !sectorSelect.id) sectorSelect.id = 'collaboratorSector';
                    if (phoneInput && !phoneInput.id) phoneInput.id = 'collaboratorPhone';
                    if (statusSelect && !statusSelect.id) statusSelect.id = 'collaboratorStatus';
                    
                    // Corrigir bot√£o de adicionar colaborador
                    const addButton = document.querySelector('button[x-text*="Cadastrar Colaborador"]');
                    if (addButton) {
                        addButton.onclick = function() {
                            window.metasApp.addCollaborator();
                        };
                    }
                    
                    // Corrigir bot√£o de cancelar
                    const cancelButton = document.querySelector('button[x-text="Cancelar"]');
                    if (cancelButton) {
                        cancelButton.onclick = function() {
                            window.metasApp.cancelCollaboratorEdit();
                        };
                    }
                }
                
                console.log('‚úÖ Formul√°rio de colaboradores corrigido!');
            },
            
            // Corrigir fun√ß√£o de adicionar colaborador
            fixAddCollaborator: function() {
                console.log('üîß Corrigindo fun√ß√£o de adicionar colaborador...');
                
                // Sobrescrever fun√ß√£o original
                window.metasApp.addCollaborator = function() {
                    const name = document.getElementById('collaboratorName')?.value || '';
                    const email = document.getElementById('collaboratorEmail')?.value || '';
                    const sectorId = document.getElementById('collaboratorSector')?.value || '';
                    const position = document.getElementById('collaboratorPosition')?.value || '';
                    const phone = document.getElementById('collaboratorPhone')?.value || '';
                    const status = document.getElementById('collaboratorStatus')?.value || 'ativo';
                    
                    if (!name || !email || !sectorId) {
                        alert('Por favor, preencha os campos obrigat√≥rios (Nome, E-mail e Setor)');
                        return;
                    }
                    
                    const collaborator = {
                        id: this.editingCollaboratorId ? this.editingCollaboratorId : Date.now().toString(),
                        name: name,
                        email: email,
                        sectorId: sectorId,
                        position: position,
                        phone: phone,
                        status: status
                    };
                    
                    if (this.editingCollaboratorId) {
                        // Atualizar colaborador existente
                        const index = this.collaborators.findIndex(c => c.id === this.editingCollaboratorId);
                        if (index !== -1) {
                            this.collaborators[index] = collaborator;
                        }
                        this.editingCollaboratorId = null;
                        alert('Colaborador atualizado com sucesso!');
                    } else {
                        // Adicionar novo colaborador
                        this.collaborators.push(collaborator);
                        alert('Colaborador adicionado com sucesso!');
                    }
                    
                    // Limpar formul√°rio
                    document.getElementById('collaboratorName').value = '';
                    document.getElementById('collaboratorEmail').value = '';
                    document.getElementById('collaboratorSector').value = '';
                    document.getElementById('collaboratorPosition').value = '';
                    document.getElementById('collaboratorPhone').value = '';
                    document.getElementById('collaboratorStatus').value = 'ativo';
                    
                    // Esconder formul√°rio
                    document.getElementById('collaboratorForm').style.display = 'none';
                    
                    // Salvar dados
                    this.saveData();
                    
                    // Recarregar lista
                    this.loadCollaboratorsList();
                };
                
                console.log('‚úÖ Fun√ß√£o de adicionar colaborador corrigida!');
            },
            
            // Corrigir fun√ß√£o de cancelar edi√ß√£o de colaborador
            fixCancelCollaboratorEdit: function() {
                console.log('üîß Corrigindo fun√ß√£o de cancelar edi√ß√£o...');
                
                window.metasApp.cancelCollaboratorEdit = function() {
                    this.editingCollaboratorId = null;
                    
                    // Limpar formul√°rio
                    document.getElementById('collaboratorName').value = '';
                    document.getElementById('collaboratorEmail').value = '';
                    document.getElementById('collaboratorSector').value = '';
                    document.getElementById('collaboratorPosition').value = '';
                    document.getElementById('collaboratorPhone').value = '';
                    document.getElementById('collaboratorStatus').value = 'ativo';
                    
                    // Esconder formul√°rio
                    document.getElementById('collaboratorForm').style.display = 'none';
                };
                
                console.log('‚úÖ Fun√ß√£o de cancelar edi√ß√£o corrigida!');
            },
            
            // Aplicar todas as corre√ß√µes
            applyAllFixes: function() {
                console.log('üöÄ Aplicando corre√ß√µes no sistema de metas...');
                
                this.fixSectorSelects();
                this.fixCollaboratorForm();
                this.fixAddCollaborator();
                this.fixCancelCollaboratorEdit();
                
                console.log('‚úÖ Todas as corre√ß√µes aplicadas!');
                console.log('üéØ Sistema de metas agora deve funcionar corretamente!');
            }
        };
        
        // Aplicar corre√ß√µes quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            // Aguardar um pouco para o sistema original carregar
            setTimeout(function() {
                window.metasFix.applyAllFixes();
            }, 1000);
        });
        
        // Fun√ß√£o global para aplicar corre√ß√µes manualmente
        function fixMetasSystem() {
            window.metasFix.applyAllFixes();
        }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 font-poppins">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-4">
                        <button onclick="history.back()" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                            <i class="fas fa-arrow-left text-xl"></i>
                        </button>
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900 dark:text-white flex items-center">
                                <i class="fas fa-bullseye text-blue-500 mr-3"></i>
                                Sistema de Metas
                            </h1>
                            <p class="text-gray-600 dark:text-gray-300">Gerencie metas e performance da equipe</p>
                        </div>
                    </div>

                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Welcome Section -->
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">
                    Bem-vindo ao seu Dashboard
                </h2>
                <p class="text-xl text-gray-600 dark:text-gray-300">
                    Gerencie suas metas, equipe e projetos de forma eficiente
                </p>
            </div>

            <!-- Feature Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 text-center card-hover animate-scale-in animate-delay-100 cursor-pointer" @click="activeTab = 'goals'">
                    <div class="w-16 h-16 gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                        <i class="fas fa-bullseye text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">
                        Sistema de Metas
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300">
                        Gerencie metas e acompanhe o desempenho da sua equipe
                    </p>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 text-center card-hover animate-scale-in animate-delay-200 cursor-pointer" @click="activeTab = 'collaborators'">
                    <div class="w-16 h-16 gradient-success rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                        <i class="fas fa-users text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">
                        Gest√£o de Equipe
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300">
                        Organize e gerencie informa√ß√µes da sua equipe
                    </p>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 text-center card-hover animate-scale-in animate-delay-300 cursor-pointer" @click="activeTab = 'commissions'">
                    <div class="w-16 h-16 gradient-warning rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                        <i class="fas fa-chart-bar text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">
                        Relat√≥rios
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300">
                        Visualize m√©tricas e relat√≥rios de desempenho
                    </p>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 text-center card-hover animate-scale-in animate-delay-400 cursor-pointer" @click="activeTab = 'sectors'">
                    <div class="w-16 h-16 gradient-info rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                        <i class="fas fa-cog text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">
                        Configura√ß√µes
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300">
                        Ajuste as configura√ß√µes do sistema
                    </p>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2" x-text="goals.filter(g => g.status === 'in_progress').length"></div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">Metas Ativas</div>
                    <div class="text-xs text-green-600 dark:text-green-400 mt-1" x-text="goals.filter(g => g.status === 'completed').length + ' conclu√≠das'"></div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-green-600 dark:text-green-400 mb-2" x-text="collaborators.filter(c => c.status === 'ativo').length"></div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">Colaboradores</div>
                    <div class="text-xs text-blue-600 dark:text-blue-400 mt-1" x-text="collaborators.length + ' total'"></div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2" x-text="calculatePerformance() + '%'"></div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">Performance</div>
                    <div class="text-xs text-yellow-600 dark:text-yellow-400 mt-1" x-text="sectors.length + ' setores'"></div>
                </div>
            </div>

            <!-- System Management Section -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8">
                <div class="mb-8">
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">
                        Gest√£o do Sistema
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300">
                        Gerencie colaboradores, setores e acompanhe o progresso das metas
                    </p>
                </div>

                <!-- Tabs -->
                <div class="border-b border-gray-200/50 dark:border-gray-700/50 mb-8">
                    <nav class="flex space-x-8">
                        <button data-tab="goals" class="py-3 px-1 border-b-2 font-medium text-sm transition-colors border-blue-500 text-blue-600 dark:text-blue-400">
                            <i class="fas fa-bullseye mr-2"></i>
                            Metas
                        </button>
                        <button data-tab="collaborators" class="py-3 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 dark:text-gray-400">
                            <i class="fas fa-users mr-2"></i>
                            Colaboradores
                        </button>
                        <button data-tab="sectors" class="py-3 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 dark:text-gray-400">
                            <i class="fas fa-building mr-2"></i>
                            Setores
                        </button>
                        <button data-tab="commissions" class="py-3 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 dark:text-gray-400">
                            <i class="fas fa-dollar-sign mr-2"></i>
                            Comiss√µes
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div id="goals-content" class="tab-content">
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-bullseye text-blue-500 mr-2"></i>
                            <span x-text="editingGoal ? 'Editar Meta' : 'Gerenciar Metas'"></span>
                        </h3>
                        
                        <!-- Cadastrar Nova Meta -->
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-6">
                            <h4 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-plus text-blue-500 mr-2"></i>
                                Cadastrar Nova Meta
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            T√≠tulo da Meta *
                                        </label>
                                        <input type="text" id="goalTitle" placeholder="Digite o t√≠tulo da meta" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Descri√ß√£o
                                        </label>
                                        <textarea id="goalDescription" placeholder="Descreva os detalhes da meta" rows="3" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                                    </div>
                                </div>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Setor *
                                        </label>
                                        <select id="goalSector" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                            <option value="">Selecione o setor</option>
                                        </select>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                Tipo de Meta
                                            </label>
                                            <select id="goalType" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                <option value="">Selecione o tipo</option>
                                                <option value="vendas">Vendas</option>
                                                <option value="atendimento">Atendimento</option>
                                                <option value="qualidade">Qualidade</option>
                                                <option value="marketing">Marketing</option>
                                                <option value="personalizado">Personalizado</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                Prioridade
                                            </label>
                                            <select id="goalPriority" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                <option value="">Selecione a prioridade</option>
                                                <option value="baixa">Baixa</option>
                                                <option value="media">M√©dia</option>
                                                <option value="alta">Alta</option>
                                                <option value="critica">Cr√≠tica</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Valor/Meta Alvo
                                        </label>
                                        <input type="text" id="goalTarget" placeholder="Ex: R$ 100.000, 50 vendas, 80%" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button id="cancelGoalBtn" style="display: none;" onclick="metasApp.cancelGoalEdit()" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium">
                                    Cancelar
                                </button>
                                <button onclick="metasApp.addGoal()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium flex items-center">
                                    <i class="fas fa-plus mr-2"></i>
                                    <span id="goalButtonText">Nova Meta</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Lista de Metas -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                                <h4 class="text-lg font-semibold">Metas Ativas</h4>
                            </div>
                            <div class="p-6">
                                <div class="space-y-4">
                                    <template x-for="goal in goals" :key="goal.id">
                                        <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                                            <div class="flex items-center justify-between">
                                                <div class="flex-1">
                                                    <div class="flex items-center space-x-3">
                                                        <div class="w-3 h-3 rounded-full" :class="{
                                                            'bg-green-500': goal.status === 'completed',
                                                            'bg-yellow-500': goal.status === 'in_progress',
                                                            'bg-red-500': goal.status === 'overdue'
                                                        }"></div>
                                                        <div>
                                                            <h5 class="font-medium text-gray-900 dark:text-gray-100" x-text="goal.title"></h5>
                                                            <p class="text-sm text-gray-500 dark:text-gray-400" x-text="goal.description"></p>
                                                        </div>
                                                    </div>
                                                    <div class="mt-2 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400">
                                                        <span x-text="'Setor: ' + getSectorName(goal.sectorId)"></span>
                                                        <span x-text="'Tipo: ' + goal.type"></span>
                                                        <span x-text="'Prioridade: ' + goal.priority"></span>
                                                        <span x-text="'Meta: ' + goal.target"></span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center space-x-2">
                                                    <div class="text-right mr-4">
                                                        <div class="text-sm font-medium text-gray-900 dark:text-gray-100" x-text="goal.progress + '%'"></div>
                                                        <div class="w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
                                                            <div class="bg-blue-600 h-2 rounded-full" :style="'width: ' + goal.progress + '%'"></div>
                                                        </div>
                                                    </div>
                                                    <button @click="viewGoal(goal)" class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300" title="Visualizar">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button @click="editGoal(goal)" class="text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 mr-2" title="Editar">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button @click="deleteGoal(goal.id)" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300" title="Excluir">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Se√ß√£o de Colaboradores -->
                <div id="collaborators-content" class="tab-content" style="display: none;">
                    <div class="space-y-6">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold flex items-center">
                                <i class="fas fa-users text-blue-500 mr-2"></i>
                                Gerenciar Colaboradores
                            </h3>
                            <button onclick="metasApp.showCollaboratorForm = true; document.getElementById('collaboratorForm').style.display = 'block';" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                <i class="fas fa-plus mr-2"></i>
                                Novo Colaborador
                            </button>
                        </div>
                        
                        <!-- Formul√°rio de Cadastro -->
                        <div id="collaboratorForm" style="display: none;" class="bg-gray-50 dark:bg-gray-700 rounded-xl p-6">
                            <h4 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-user-plus text-blue-500 mr-2"></i>
                                <span x-text="editingCollaborator ? 'Editar Colaborador' : 'Cadastrar Novo Colaborador'"></span>
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Nome Completo *
                                        </label>
                                        <input type="text" id="collaboratorName" placeholder="Digite o nome completo" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            E-mail *
                                        </label>
                                        <input type="email" x-model="newCollaborator.email" placeholder="exemplo@empresa.com" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Cargo
                                        </label>
                                        <input type="text" x-model="newCollaborator.position" placeholder="Ex: Analista, Gerente, Coordenador" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                </div>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Setor *
                                        </label>
                                        <select x-model="newCollaborator.sectorId" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                            <option value="">Selecione o setor</option>
                                            <template x-for="sector in sectors" :key="sector.id">
                                                <option :value="sector.id" x-text="sector.name"></option>
                                            </template>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Telefone
                                        </label>
                                        <input type="text" x-model="newCollaborator.phone" placeholder="(11) 99999-9999" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Status
                                        </label>
                                        <select x-model="newCollaborator.status" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                            <option value="ativo">Ativo</option>
                                            <option value="inativo">Inativo</option>
                                            <option value="ferias">F√©rias</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button @click="cancelCollaboratorEdit()" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium">
                                    Cancelar
                                </button>
                                <button @click="addCollaborator()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium flex items-center">
                                    <i class="fas fa-plus mr-2"></i>
                                    <span x-text="editingCollaborator ? 'Atualizar Colaborador' : 'Cadastrar Colaborador'"></span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Lista de Colaboradores -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                                <h4 class="text-lg font-semibold">Colaboradores Cadastrados</h4>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Nome</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">E-mail</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Cargo</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Setor</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Status</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <template x-for="collaborator in collaborators" :key="collaborator.id">
                                            <tr>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-gray-100" x-text="collaborator.name"></div>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="collaborator.email"></div>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="collaborator.position"></div>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="getSectorName(collaborator.sectorId)"></div>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium" :class="{
                                                        'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': collaborator.status === 'ativo',
                                                        'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200': collaborator.status === 'inativo',
                                                        'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': collaborator.status === 'ferias'
                                                    }" x-text="collaborator.status"></span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                    <button @click="editCollaborator(collaborator)" class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button @click="deleteCollaborator(collaborator.id)" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Se√ß√£o de Setores -->
                <div id="sectors-content" class="tab-content" style="display: none;">
                    <div class="space-y-6">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold flex items-center">
                                <i class="fas fa-building text-blue-500 mr-2"></i>
                                Gerenciar Setores
                            </h3>
                            <button onclick="metasApp.showSectorForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                <i class="fas fa-plus mr-2"></i>
                                Novo Setor
                            </button>
                        </div>
                        
                        <!-- Formul√°rio de Cadastro -->
                        <div id="sectorForm" style="display: none;" class="bg-gray-50 dark:bg-gray-700 rounded-xl p-6">
                            <h4 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-building text-blue-500 mr-2"></i>
                                <span x-text="editingSector ? 'Editar Setor' : 'Cadastrar Novo Setor'"></span>
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Nome do Setor *
                                        </label>
                                        <input type="text" id="sectorName" placeholder="Ex: Vendas, Marketing, Tecnologia" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Gerente/Respons√°vel *
                                        </label>
                                        <input type="text" id="sectorManager" placeholder="Nome do respons√°vel pelo setor" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Or√ßamento
                                        </label>
                                        <input type="text" id="sectorBudget" placeholder="Ex: R$ 100.000" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                </div>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Localiza√ß√£o
                                        </label>
                                        <input type="text" id="sectorLocation" placeholder="Ex: Andar 2 - Sala 201" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Status
                                        </label>
                                        <select id="sectorStatus" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                            <option value="ativo">Ativo</option>
                                            <option value="inativo">Inativo</option>
                                            <option value="em_reestruturacao">Em Reestrutura√ß√£o</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            Descri√ß√£o
                                        </label>
                                        <textarea id="sectorDescription" placeholder="Descreva as responsabilidades e objetivos do setor" rows="3" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button onclick="metasApp.cancelSectorEdit()" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium">
                                    Cancelar
                                </button>
                                <button onclick="metasApp.addSector()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium flex items-center">
                                    <i class="fas fa-plus mr-2"></i>
                                    <span id="sectorButtonText">Cadastrar Setor</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Lista de Setores -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                                <h4 class="text-lg font-semibold">Setores Cadastrados</h4>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Nome</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Gerente</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Localiza√ß√£o</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Or√ßamento</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Status</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody id="sectorsTableBody" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <!-- Setores ser√£o carregados aqui -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Se√ß√£o de Comiss√µes -->
                <div id="commissions-content" class="tab-content" style="display: none;">
                    <div class="space-y-6">
                        <!-- Header do Sistema de Comiss√µes -->
                        <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="text-2xl font-bold mb-2">$ Sistema de Comiss√µes</h3>
                                    <p class="text-blue-100">Veloz Fibra - Gest√£o flex√≠vel de comiss√µes por setor</p>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                                        Ativo
                                    </span>
                                    <button onclick="clearAllData()" class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 hover:bg-red-200 transition-colors">
                                        <i class="fas fa-trash mr-1"></i>
                                        Limpar Dados
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Cards de Estat√≠sticas -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                <div class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2">R$ 0,00</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">Comiss√£o Base</div>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                <div class="text-2xl font-bold text-green-600 dark:text-green-400 mb-2">0</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">Meta Mensal</div>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                <div class="text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2">0</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">Total de Atividades</div>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                <div class="text-2xl font-bold text-yellow-600 dark:text-yellow-400 mb-2">R$ 0,00</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">Total Comiss√µes</div>
                            </div>
                        </div>

                        <!-- Regras de Comiss√£o -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                            <h4 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                                Sistema Flex√≠vel de Comiss√µes
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-3">
                                    <h5 class="font-medium text-gray-900 dark:text-gray-100">Tipos de Comiss√£o</h5>
                                    <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                                        <li>‚Ä¢ <strong>Vendas:</strong> Comiss√£o por vendas realizadas</li>
                                        <li>‚Ä¢ <strong>Suporte:</strong> Bonifica√ß√£o por atendimentos</li>
                                        <li>‚Ä¢ <strong>Marketing:</strong> B√¥nus por leads gerados</li>
                                        <li>‚Ä¢ <strong>Qualidade:</strong> Incentivo por avalia√ß√µes</li>
                                        <li>‚Ä¢ <strong>Personalizado:</strong> Configure conforme necessidade</li>
                                    </ul>
                                </div>
                                <div class="space-y-3">
                                    <h5 class="font-medium text-gray-900 dark:text-gray-100">Configura√ß√£o Flex√≠vel</h5>
                                    <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                                        <li>‚Ä¢ Defina metas espec√≠ficas por setor</li>
                                        <li>‚Ä¢ Configure valores de comiss√£o personalizados</li>
                                        <li>‚Ä¢ Estabele√ßa crit√©rios de bonifica√ß√£o</li>
                                        <li>‚Ä¢ Acompanhe performance por colaborador</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Tabs de Comiss√µes -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg">
                            <div class="border-b border-gray-200 dark:border-gray-700">
                                <nav class="flex space-x-8 px-6">
                                    <button @click="commissionTab = 'register'" :class="commissionTab === 'register' ? 'border-blue-500 text-blue-600 dark:text-blue-400' : 'border-transparent text-gray-500 dark:text-gray-400'" class="py-4 px-1 border-b-2 font-medium text-sm transition-colors">
                                        <i class="fas fa-plus mr-2"></i>
                                        Registrar
                                    </button>
                                    <button @click="commissionTab = 'individual'" :class="commissionTab === 'individual' ? 'border-blue-500 text-blue-600 dark:text-blue-400' : 'border-transparent text-gray-500 dark:text-gray-400'" class="py-4 px-1 border-b-2 font-medium text-sm transition-colors">
                                        <i class="fas fa-user mr-2"></i>
                                        Individual
                                    </button>
                                    <button @click="commissionTab = 'reports'" :class="commissionTab === 'reports' ? 'border-blue-500 text-blue-600 dark:text-blue-400' : 'border-transparent text-gray-500 dark:text-gray-400'" class="py-4 px-1 border-b-2 font-medium text-sm transition-colors">
                                        <i class="fas fa-chart-bar mr-2"></i>
                                        Relat√≥rios
                                    </button>
                                    <button @click="commissionTab = 'overview'" :class="commissionTab === 'overview' ? 'border-blue-500 text-blue-600 dark:text-blue-400' : 'border-transparent text-gray-500 dark:text-gray-400'" class="py-4 px-1 border-b-2 font-medium text-sm transition-colors">
                                        <i class="fas fa-eye mr-2"></i>
                                        Vis√£o Geral
                                    </button>
                                </nav>
                            </div>

                            <!-- Conte√∫do das Tabs -->
                            <div class="p-6">
                                <!-- Tab Registrar -->
                                <div x-show="commissionTab === 'register'">
                                    <div class="space-y-6">
                                        <h4 class="text-lg font-semibold flex items-center">
                                            <i class="fas fa-plus text-blue-500 mr-2"></i>
                                            <span x-text="editingCommission ? 'Editar Registro' : 'Registrar Nova Comiss√£o'"></span>
                                        </h4>
                                        
                                        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-6">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <div class="space-y-4">
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                            Colaborador Respons√°vel *
                                                        </label>
                                                        <select x-model="newRenewal.collaboratorId" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                            <option value="">Selecione o colaborador</option>
                                                            <template x-for="collaborator in collaborators" :key="collaborator.id">
                                                                <option :value="collaborator.id" x-text="collaborator.name"></option>
                                                            </template>
                                                        </select>
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                            Tipo de Comiss√£o *
                                                        </label>
                                                        <select x-model="newRenewal.commissionType" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                            <option value="">Selecione o tipo</option>
                                                            <option value="suporte">Suporte T√©cnico</option>
                                                            <option value="vendas">Vendas</option>
                                                            <option value="marketing">Marketing</option>
                                                            <option value="qualidade">Qualidade</option>
                                                            <option value="personalizado">Personalizado</option>
                                                            <option value="outro">Outro</option>
                                                        </select>
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                            Descri√ß√£o da Atividade *
                                                        </label>
                                                        <input type="text" x-model="newRenewal.clientName" placeholder="Ex: Atendimento cliente, Venda realizada, Lead gerado" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                            C√≥digo/Refer√™ncia
                                                        </label>
                                                        <input type="text" x-model="newRenewal.contractNumber" placeholder="Ex: VF202401001, AT001, VEN001" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                    </div>
                                                </div>
                                                <div class="space-y-4">
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                            Data da Atividade *
                                                        </label>
                                                        <input type="date" x-model="newRenewal.renewalDate" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                            Valor Base (R$)
                                                        </label>
                                                        <input type="number" x-model="newRenewal.previousPlanValue" placeholder="0.00" step="0.01" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                            Valor Adicional (R$)
                                                        </label>
                                                        <input type="number" x-model="newRenewal.newPlanValue" placeholder="0.00" step="0.01" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-6 flex justify-end space-x-3">
                                                <button x-show="editingCommission" @click="cancelCommissionEdit()" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium">
                                                    Cancelar
                                                </button>
                                                <button @click="registerCommission()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium flex items-center">
                                                    <i class="fas fa-plus mr-2"></i>
                                                    <span x-text="editingCommission ? 'Atualizar Registro' : 'Registrar Comiss√£o'"></span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab Individual -->
                                <div x-show="commissionTab === 'individual'">
                                    <div class="space-y-6">
                                        <h4 class="text-lg font-semibold flex items-center">
                                            <i class="fas fa-user text-blue-500 mr-2"></i>
                                            Painel Individual
                                        </h4>
                                        
                                        <!-- Filtros -->
                                        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-6">
                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                        Colaborador
                                                    </label>
                                                    <select x-model="selectedCollaborator" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                        <option value="">Selecione o colaborador</option>
                                                        <template x-for="collaborator in collaborators" :key="collaborator.id">
                                                            <option :value="collaborator.id" x-text="collaborator.name"></option>
                                                        </template>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                        M√™s
                                                    </label>
                                                    <select x-model="selectedMonth" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                        <template x-for="month in months" :key="month.value">
                                                            <option :value="month.value" x-text="month.label"></option>
                                                        </template>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                        Ano
                                                    </label>
                                                    <input type="number" x-model="selectedYear" min="2020" max="2030" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Cards de Performance -->
                                        <div x-show="selectedCollaborator" class="grid grid-cols-1 md:grid-cols-4 gap-6">
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2" x-text="getCollaboratorStats().renewals"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Renova√ß√µes</div>
                                            </div>
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-green-600 dark:text-green-400 mb-2" x-text="formatCurrency(getCollaboratorStats().fixedCommission)"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Comiss√£o Fixa</div>
                                            </div>
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2" x-text="formatCurrency(getCollaboratorStats().upgradeCommission)"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Comiss√£o Upgrade</div>
                                            </div>
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-yellow-600 dark:text-yellow-400 mb-2" x-text="formatCurrency(getCollaboratorStats().totalCommission)"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Total</div>
                                            </div>
                                        </div>

                                        <!-- Tabela de Renova√ß√µes -->
                                        <div x-show="selectedCollaborator" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                                            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                                                <h5 class="text-lg font-semibold">Renova√ß√µes do Per√≠odo</h5>
                                            </div>
                                            <div class="overflow-x-auto">
                                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                                        <tr>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Atividade</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">C√≥digo</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tipo</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Data</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Valor Anterior</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Novo Valor</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Upgrade</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Comiss√£o</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">A√ß√µes</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                                        <template x-for="renewal in getCollaboratorRenewals()" :key="renewal.id">
                                                            <tr>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm font-medium text-gray-900 dark:text-gray-100" x-text="renewal.clientName"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="renewal.contractNumber"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="renewal.commissionType"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="formatDate(renewal.renewalDate)"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="formatCurrency(renewal.previousPlan.value)"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="formatCurrency(renewal.newPlan.value)"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="formatCurrency(renewal.upgradeValue)"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm font-medium text-green-600 dark:text-green-400" x-text="formatCurrency(renewal.commissionValue)"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                                    <button @click="viewCommission(renewal)" class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-2" title="Visualizar">
                                                                        <i class="fas fa-eye"></i>
                                                                    </button>
                                                                    <button @click="editCommission(renewal)" class="text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 mr-2" title="Editar">
                                                                        <i class="fas fa-edit"></i>
                                                                    </button>
                                                                    <button @click="deleteCommission(renewal.id)" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300" title="Excluir">
                                                                        <i class="fas fa-trash"></i>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </template>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab Relat√≥rios -->
                                <div x-show="commissionTab === 'reports'">
                                    <div class="space-y-6">
                                        <h4 class="text-lg font-semibold flex items-center">
                                            <i class="fas fa-chart-bar text-blue-500 mr-2"></i>
                                            Relat√≥rios Mensais
                                        </h4>
                                        
                                        <!-- Filtros -->
                                        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-6">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                        M√™s
                                                    </label>
                                                    <select x-model="reportMonth" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                        <template x-for="month in months" :key="month.value">
                                                            <option :value="month.value" x-text="month.label"></option>
                                                        </template>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                                        Ano
                                                    </label>
                                                    <input type="number" x-model="reportYear" min="2020" max="2030" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Resumo -->
                                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2" x-text="getMonthlyReport().totalRenewals"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Total Renova√ß√µes</div>
                                            </div>
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-green-600 dark:text-green-400 mb-2" x-text="formatCurrency(getMonthlyReport().totalCommissions)"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Total Comiss√µes</div>
                                            </div>
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2" x-text="getMonthlyReport().activeCollaborators"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Colaboradores Ativos</div>
                                            </div>
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-yellow-600 dark:text-yellow-400 mb-2" x-text="formatCurrency(getMonthlyReport().averageGoal)"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Meta M√©dia</div>
                                            </div>
                                        </div>

                                        <!-- Tabela de Performance -->
                                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                                            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                                                <h5 class="text-lg font-semibold">Performance por Colaborador</h5>
                                            </div>
                                            <div class="overflow-x-auto">
                                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                                        <tr>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Colaborador</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Renova√ß√µes</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Comiss√£o Fixa</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Comiss√£o Upgrade</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Total</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Meta</th>
                                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">%</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                                        <template x-for="collaborator in collaborators" :key="collaborator.id">
                                                            <tr>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm font-medium text-gray-900 dark:text-gray-100" x-text="collaborator.name"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="getCollaboratorRenewalsCount(collaborator.id)"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="formatCurrency(getCollaboratorRenewalsCount(collaborator.id) * 3)"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="formatCurrency(getCollaboratorUpgradeCommission(collaborator.id))"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm font-medium text-green-600 dark:text-green-400" x-text="formatCurrency(getCollaboratorTotalCommission(collaborator.id))"></div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400">100</div>
                                                                </td>
                                                                <td class="px-6 py-4 whitespace-nowrap">
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="Math.round((getCollaboratorRenewalsCount(collaborator.id) / 100) * 100) + '%'"></div>
                                                                </td>
                                                            </tr>
                                                        </template>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab Vis√£o Geral -->
                                <div x-show="commissionTab === 'overview'">
                                    <div class="space-y-6">
                                        <h4 class="text-lg font-semibold flex items-center">
                                            <i class="fas fa-eye text-blue-500 mr-2"></i>
                                            Vis√£o Geral do Sistema
                                        </h4>
                                        
                                        <!-- Cards de Estat√≠sticas Gerais -->
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2" x-text="getTotalRenewals()"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Total de Renova√ß√µes</div>
                                            </div>
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-green-600 dark:text-green-400 mb-2" x-text="formatCurrency(getTotalCommissions())"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Comiss√µes Pagas</div>
                                            </div>
                                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center">
                                                <div class="text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2" x-text="formatCurrency(getTotalUpgrades())"></div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Valor em Upgrades</div>
                                            </div>
                                        </div>

                                        <!-- Colaboradores Ativos -->
                                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                                            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                                                <h5 class="text-lg font-semibold">Colaboradores Ativos</h5>
                                            </div>
                                            <div class="p-6">
                                                <div class="space-y-4">
                                                    <template x-for="collaborator in collaborators" :key="collaborator.id">
                                                        <div class="flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                                                            <div class="flex items-center space-x-3">
                                                                <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
                                                                    <i class="fas fa-user text-blue-600 dark:text-blue-400"></i>
                                                                </div>
                                                                <div>
                                                                    <div class="font-medium text-gray-900 dark:text-gray-100" x-text="collaborator.name"></div>
                                                                    <div class="text-sm text-gray-500 dark:text-gray-400" x-text="collaborator.position"></div>
                                                                </div>
                                                            </div>
                                                            <div class="text-right">
                                                                <div class="text-sm font-medium text-gray-900 dark:text-gray-100" x-text="getCollaboratorRenewalsCount(collaborator.id) + ' renova√ß√µes'"></div>
                                                                <div class="text-sm text-green-600 dark:text-green-400" x-text="formatCurrency(getCollaboratorTotalCommission(collaborator.id))"></div>
                                                            </div>
                                                            <button @click="selectCollaboratorFromOverview(collaborator.id)" class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300">
                                                                <i class="fas fa-eye"></i>
                                                            </button>
                                                        </div>
                                                    </template>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        

        

    </div>

    <script>
        function metasApp() {
            return {
                // Carregar dados do localStorage ou usar dados padr√£o
                init() {
                    // Carregar dados salvos
                    const savedGoals = localStorage.getItem('metas_goals');
                    const savedCollaborators = localStorage.getItem('metas_collaborators');
                    const savedSectors = localStorage.getItem('metas_sectors');
                    const savedRenewals = localStorage.getItem('metas_renewals');
                    
                    if (savedGoals) this.goals = JSON.parse(savedGoals);
                    if (savedCollaborators) this.collaborators = JSON.parse(savedCollaborators);
                    if (savedSectors) this.sectors = JSON.parse(savedSectors);
                    if (savedRenewals) this.renewals = JSON.parse(savedRenewals);
                },
                activeTab: 'goals',
                commissionTab: 'register',
                showCollaboratorForm: false,
                showSectorForm: false,
                editingCollaborator: null,
                editingSector: null,
                editingGoal: null,
                viewingGoal: null,
                editingRenewal: null,
                viewingRenewal: false,
                selectedCollaborator: '',
                selectedMonth: new Date().getMonth() + 1,
                selectedYear: new Date().getFullYear(),
                reportMonth: new Date().getMonth() + 1,
                reportYear: new Date().getFullYear(),
                newGoal: {
                    title: '',
                    description: '',
                    sectorId: '',
                    type: '',
                    priority: '',
                    target: ''
                },
                newCollaborator: {
                    name: '',
                    email: '',
                    sectorId: '',
                    position: '',
                    phone: '',
                    status: 'ativo'
                },
                newSector: {
                    name: '',
                    description: '',
                    manager: '',
                    budget: '',
                    location: '',
                    status: 'ativo'
                },
                newRenewal: {
                    collaboratorId: '',
                    clientName: '',
                    contractNumber: '',
                    renewalDate: '',
                    previousPlanValue: 0,
                    newPlanValue: 0,
                    commissionType: ''
                },
                goals: [
                    {
                        id: '1',
                        title: 'Meta de Vendas - Q1 2024',
                        description: 'Aumentar vendas em 20% no primeiro trimestre',
                        sectorId: '2',
                        type: 'vendas',
                        priority: 'alta',
                        target: 'R$ 500.000',
                        status: 'in_progress',
                        progress: 60
                    },
                    {
                        id: '2',
                        title: 'Meta de Atendimento - Fevereiro',
                        description: 'Manter satisfa√ß√£o do cliente acima de 90%',
                        sectorId: '3',
                        type: 'atendimento',
                        priority: 'media',
                        target: '90% satisfa√ß√£o',
                        status: 'completed',
                        progress: 95
                    },
                    {
                        id: '3',
                        title: 'Meta de Marketing - Mar√ßo',
                        description: 'Gerar 500 leads qualificados',
                        sectorId: '5',
                        type: 'marketing',
                        priority: 'alta',
                        target: '500 leads',
                        status: 'in_progress',
                        progress: 40
                    }
                ],
                sectors: [
                    { id: '1', name: 'Administrativo', description: 'Setor administrativo', manager: 'Ana Silva', budget: 'R$ 50.000', location: 'Andar 1 - Sala 101', status: 'ativo' },
                    { id: '2', name: 'Vendas', description: 'Setor de vendas e prospec√ß√£o', manager: 'Jo√£o Silva', budget: 'R$ 100.000', location: 'Andar 2 - Sala 201', status: 'ativo' },
                    { id: '3', name: 'Atendimento', description: 'Setor de atendimento ao cliente', manager: 'Maria Santos', budget: 'R$ 30.000', location: 'Andar 1 - Sala 102', status: 'ativo' },
                    { id: '4', name: 'T√©cnico', description: 'Setor t√©cnico e suporte', manager: 'Pedro Costa', budget: 'R$ 80.000', location: 'Andar 3 - Sala 301', status: 'ativo' },
                    { id: '5', name: 'Marketing', description: 'Setor de marketing e comunica√ß√£o', manager: 'Carlos Lima', budget: 'R$ 60.000', location: 'Andar 2 - Sala 202', status: 'ativo' },
                    { id: '6', name: 'Financeiro', description: 'Setor financeiro e administrativo', manager: 'Lucia Santos', budget: 'R$ 40.000', location: 'Andar 1 - Sala 103', status: 'ativo' }
                ],
                collaborators: [
                    { id: '1', name: 'Jo√£o Silva', email: 'joao.silva@velozfibra.com', sectorId: '2', position: 'Vendedor', phone: '(11) 99999-1111', status: 'ativo' },
                    { id: '2', name: 'Maria Santos', email: 'maria.santos@velozfibra.com', sectorId: '3', position: 'Atendente', phone: '(11) 99999-2222', status: 'ativo' },
                    { id: '3', name: 'Pedro Costa', email: 'pedro.costa@velozfibra.com', sectorId: '4', position: 'T√©cnico', phone: '(11) 99999-3333', status: 'ativo' }
                ],
                months: [
                    { value: 1, label: "Janeiro" },
                    { value: 2, label: "Fevereiro" },
                    { value: 3, label: "Mar√ßo" },
                    { value: 4, label: "Abril" },
                    { value: 5, label: "Maio" },
                    { value: 6, label: "Junho" },
                    { value: 7, label: "Julho" },
                    { value: 8, label: "Agosto" },
                    { value: 9, label: "Setembro" },
                    { value: 10, label: "Outubro" },
                    { value: 11, label: "Novembro" },
                    { value: 12, label: "Dezembro" }
                ],
                renewals: [],

                // Fun√ß√µes
                addGoal() {
                    const title = document.getElementById('goalTitle').value;
                    const description = document.getElementById('goalDescription').value;
                    const sectorId = document.getElementById('goalSector').value;
                    const type = document.getElementById('goalType').value;
                    const priority = document.getElementById('goalPriority').value;
                    const target = document.getElementById('goalTarget').value;
                    
                    if (!title || !sectorId) {
                        alert('Por favor, preencha os campos obrigat√≥rios');
                        return;
                    }
                    
                    const goal = {
                        id: this.editingGoal ? this.editingGoal.id : Date.now().toString(),
                        title: title,
                        description: description,
                        sectorId: sectorId,
                        type: type,
                        priority: priority,
                        target: target,
                        status: this.editingGoal ? this.editingGoal.status : 'in_progress',
                        progress: this.editingGoal ? this.editingGoal.progress : 0
                    };
                    
                    if (this.editingGoal) {
                        // Atualizar meta existente
                        const index = this.goals.findIndex(g => g.id === this.editingGoal.id);
                        if (index !== -1) {
                            this.goals[index] = goal;
                        }
                        this.editingGoal = null;
                    } else {
                        // Adicionar nova meta
                        this.goals.push(goal);
                    }
                    
                    // Limpar formul√°rio
                    document.getElementById('goalTitle').value = '';
                    document.getElementById('goalDescription').value = '';
                    document.getElementById('goalSector').value = '';
                    document.getElementById('goalType').value = '';
                    document.getElementById('goalPriority').value = '';
                    document.getElementById('goalTarget').value = '';
                    
                    // Resetar bot√£o
                    document.getElementById('goalButtonText').textContent = 'Nova Meta';
                    document.getElementById('cancelGoalBtn').style.display = 'none';
                    this.editingGoal = null;
                    
                    this.saveData();
                    this.loadGoals(); // Recarregar lista
                },
                
                addCollaborator() {
                    if (!this.newCollaborator.name || !this.newCollaborator.email || !this.newCollaborator.sectorId) {
                        alert('Por favor, preencha os campos obrigat√≥rios');
                        return;
                    }
                    
                    const collaborator = {
                        id: this.editingCollaborator ? this.editingCollaborator.id : Date.now().toString(),
                        name: this.newCollaborator.name,
                        email: this.newCollaborator.email,
                        sectorId: this.newCollaborator.sectorId,
                        position: this.newCollaborator.position,
                        phone: this.newCollaborator.phone,
                        status: this.newCollaborator.status
                    };
                    
                    if (this.editingCollaborator) {
                        // Atualizar colaborador existente
                        const index = this.collaborators.findIndex(c => c.id === this.editingCollaborator.id);
                        if (index !== -1) {
                            this.collaborators[index] = collaborator;
                        }
                        this.editingCollaborator = null;
                    } else {
                        // Adicionar novo colaborador
                        this.collaborators.push(collaborator);
                    }
                    
                    // Limpar formul√°rio
                    this.newCollaborator = {
                        name: '',
                        email: '',
                        sectorId: '',
                        position: '',
                        phone: '',
                        status: 'ativo'
                    };
                    
                    this.showCollaboratorForm = false;
                    this.saveData();
                },
                
                editGoal(goal) {
                    this.editingGoal = goal;
                    this.newGoal = {
                        title: goal.title,
                        description: goal.description,
                        sectorId: goal.sectorId,
                        type: goal.type,
                        priority: goal.priority,
                        target: goal.target
                    };
                },
                
                viewGoal(goal) {
                    this.viewingGoal = goal;
                },
                
                deleteGoal(goalId) {
                    if (confirm('Tem certeza que deseja excluir esta meta?')) {
                        this.goals = this.goals.filter(g => g.id !== goalId);
                        this.saveData();
                    }
                },
                
                cancelGoalEdit() {
                    this.editingGoal = null;
                    this.newGoal = {
                        title: '',
                        description: '',
                        sectorId: '',
                        type: '',
                        priority: '',
                        target: ''
                    };
                },
                
                editRenewal(renewal) {
                    this.editingRenewal = renewal;
                    this.newRenewal = {
                        collaboratorId: renewal.collaboratorId,
                        clientName: renewal.clientName,
                        contractNumber: renewal.contractNumber,
                        renewalDate: renewal.renewalDate,
                        previousPlanValue: renewal.previousPlan.value,
                        newPlanValue: renewal.newPlan.value,
                        commissionType: renewal.commissionType || ''
                    };
                    this.commissionTab = 'register';
                },
                
                viewRenewal(renewal) {
                    this.viewingRenewal = renewal;
                },
                
                deleteRenewal(renewalId) {
                    if (confirm('Tem certeza que deseja excluir esta comiss√£o?')) {
                        this.renewals = this.renewals.filter(r => r.id !== renewalId);
                        this.saveData();
                    }
                },
                
                cancelRenewalEdit() {
                    this.editingRenewal = null;
                    this.newRenewal = {
                        collaboratorId: '',
                        clientName: '',
                        contractNumber: '',
                        renewalDate: '',
                        previousPlanValue: 0,
                        newPlanValue: 0,
                        commissionType: ''
                    };
                },
                
                editCollaborator(collaborator) {
                    this.editingCollaborator = collaborator;
                    this.newCollaborator = {
                        name: collaborator.name,
                        email: collaborator.email,
                        sectorId: collaborator.sectorId,
                        position: collaborator.position,
                        phone: collaborator.phone,
                        status: collaborator.status
                    };
                    this.showCollaboratorForm = true;
                },
                
                deleteCollaborator(collaboratorId) {
                    if (confirm('Tem certeza que deseja excluir este colaborador?')) {
                        this.collaborators = this.collaborators.filter(c => c.id !== collaboratorId);
                        // Tamb√©m remover renova√ß√µes associadas
                        this.renewals = this.renewals.filter(r => r.collaboratorId !== collaboratorId);
                        this.saveData();
                    }
                },
                
                cancelCollaboratorEdit() {
                    this.editingCollaborator = null;
                    this.newCollaborator = {
                        name: '',
                        email: '',
                        sectorId: '',
                        position: '',
                        phone: '',
                        status: 'ativo'
                    };
                    this.showCollaboratorForm = false;
                    this.saveData();
                },
                
                addSector() {
                    if (!this.newSector.name || !this.newSector.manager) {
                        alert('Por favor, preencha os campos obrigat√≥rios');
                        return;
                    }
                    
                    const sector = {
                        id: this.editingSector ? this.editingSector.id : Date.now().toString(),
                        name: this.newSector.name,
                        description: this.newSector.description,
                        manager: this.newSector.manager,
                        budget: this.newSector.budget,
                        location: this.newSector.location,
                        status: this.newSector.status
                    };
                    
                    if (this.editingSector) {
                        // Atualizar setor existente
                        const index = this.sectors.findIndex(s => s.id === this.editingSector.id);
                        if (index !== -1) {
                            this.sectors[index] = sector;
                        }
                        this.editingSector = null;
                    } else {
                        // Adicionar novo setor
                        this.sectors.push(sector);
                    }
                    
                    // Limpar formul√°rio
                    this.newSector = {
                        name: '',
                        description: '',
                        manager: '',
                        budget: '',
                        location: '',
                        status: 'ativo'
                    };
                    
                    this.showSectorForm = false;
                    this.saveData();
                },
                
                editSector(sector) {
                    this.editingSector = sector;
                    this.newSector = {
                        name: sector.name,
                        description: sector.description,
                        manager: sector.manager,
                        budget: sector.budget,
                        location: sector.location,
                        status: sector.status
                    };
                    this.showSectorForm = true;
                },
                
                deleteSector(sectorId) {
                    if (confirm('Tem certeza que deseja excluir este setor? Isso tamb√©m remover√° todos os colaboradores associados.')) {
                        // Remover setor
                        this.sectors = this.sectors.filter(s => s.id !== sectorId);
                        // Remover colaboradores associados
                        this.collaborators = this.collaborators.filter(c => c.sectorId !== sectorId);
                        // Remover renova√ß√µes de colaboradores removidos
                        const removedCollaboratorIds = this.collaborators.filter(c => c.sectorId !== sectorId).map(c => c.id);
                        this.renewals = this.renewals.filter(r => !removedCollaboratorIds.includes(r.collaboratorId));
                        this.saveData();
                    }
                },
                
                cancelSectorEdit() {
                    this.editingSector = null;
                    this.newSector = {
                        name: '',
                        description: '',
                        manager: '',
                        budget: '',
                        location: '',
                        status: 'ativo'
                    };
                    this.showSectorForm = false;
                    this.saveData();
                },
                
                registerCommission() {
                    if (!this.newRenewal.collaboratorId || !this.newRenewal.clientName || !this.newRenewal.commissionType || !this.newRenewal.renewalDate) {
                        alert('Por favor, preencha todos os campos obrigat√≥rios');
                        return;
                    }
                    
                    const collaborator = this.collaborators.find(c => c.id === this.newRenewal.collaboratorId);
                    const upgradeValue = Math.max(0, this.newRenewal.newPlanValue - this.newRenewal.previousPlanValue);
                    
                    const commission = {
                        id: this.editingCommission ? this.editingCommission.id : 'commission_' + Date.now(),
                        collaboratorId: this.newRenewal.collaboratorId,
                        collaboratorName: collaborator ? collaborator.name : 'N√£o informado',
                        clientName: this.newRenewal.clientName,
                        contractNumber: this.newRenewal.contractNumber,
                        renewalDate: this.newRenewal.renewalDate,
                        previousPlan: { name: 'Plano Anterior', value: this.newRenewal.previousPlanValue },
                        newPlan: { name: 'Novo Plano', value: this.newRenewal.newPlanValue },
                        upgradeValue: upgradeValue,
                        commissionValue: upgradeValue + 3, // Comiss√£o base + upgrade
                        commissionType: this.newRenewal.commissionType,
                        status: this.editingCommission ? this.editingCommission.status : 'valid',
                        paymentStatus: this.editingCommission ? this.editingCommission.paymentStatus : 'paid',
                        createdAt: this.editingCommission ? this.editingCommission.createdAt : new Date().toISOString()
                    };
                    
                    if (this.editingCommission) {
                        // Atualizar comiss√£o existente
                        const index = this.renewals.findIndex(r => r.id === this.editingCommission.id);
                        if (index !== -1) {
                            this.renewals[index] = commission;
                        }
                        this.editingCommission = null;
                        alert('Comiss√£o atualizada com sucesso!');
                    } else {
                        // Adicionar nova comiss√£o
                        this.renewals.push(commission);
                        alert('Comiss√£o registrada com sucesso!');
                    }
                    
                    // Limpar formul√°rio
                    this.newRenewal = {
                        collaboratorId: '',
                        clientName: '',
                        contractNumber: '',
                        renewalDate: '',
                        previousPlanValue: 0,
                        newPlanValue: 0,
                        commissionType: ''
                    };
                    
                    this.saveData();
                },
                
                getSectorName(sectorId) {
                    const sector = this.sectors.find(s => s.id === sectorId);
                    return sector ? sector.name : 'N√£o informado';
                },
                
                getCollaboratorsBySector(sectorId) {
                    return this.collaborators.filter(c => c.sectorId === sectorId);
                },
                
                getSectorTotalCommission(sectorId) {
                    const sectorCollaborators = this.getCollaboratorsBySector(sectorId);
                    return sectorCollaborators.reduce((total, collaborator) => {
                        return total + this.getCollaboratorTotalCommission(collaborator.id);
                    }, 0);
                },
                
                getCollaboratorUpgradeCommission(collaboratorId) {
                    return this.renewals
                        .filter(r => r.collaboratorId === collaboratorId)
                        .reduce((total, renewal) => total + renewal.upgradeValue, 0);
                },
                
                getCollaboratorStats() {
                    if (!this.selectedCollaborator) return { renewals: 0, fixedCommission: 0, upgradeCommission: 0, totalCommission: 0 };
                    
                    const collaboratorRenewals = this.renewals.filter(r => r.collaboratorId === this.selectedCollaborator);
                    const renewals = collaboratorRenewals.length;
                    const fixedCommission = renewals * 3;
                    const upgradeCommission = collaboratorRenewals.reduce((total, r) => total + r.upgradeValue, 0);
                    const totalCommission = fixedCommission + upgradeCommission;
                    
                    return { renewals, fixedCommission, upgradeCommission, totalCommission };
                },
                
                getCollaboratorRenewals() {
                    if (!this.selectedCollaborator) return [];
                    return this.renewals.filter(r => r.collaboratorId === this.selectedCollaborator);
                },
                
                getCollaboratorRenewalsCount(collaboratorId) {
                    return this.renewals.filter(r => r.collaboratorId === collaboratorId).length;
                },
                
                getCollaboratorTotalCommission(collaboratorId) {
                    const renewals = this.getCollaboratorRenewalsCount(collaboratorId);
                    const upgradeCommission = this.getCollaboratorUpgradeCommission(collaboratorId);
                    return (renewals * 3) + upgradeCommission;
                },
                
                getMonthlyReport() {
                    return {
                        totalRenewals: this.renewals.length,
                        totalCommissions: this.renewals.reduce((total, r) => total + r.commissionValue, 0),
                        activeCollaborators: this.collaborators.filter(c => c.status === 'ativo').length,
                        averageGoal: 100
                    };
                },
                
                getTotalRenewals() {
                    return this.renewals.length;
                },
                
                getTotalCommissions() {
                    return this.renewals.reduce((total, r) => total + r.commissionValue, 0);
                },
                
                getTotalUpgrades() {
                    return this.renewals.reduce((total, r) => total + r.upgradeValue, 0);
                },
                
                selectCollaboratorFromOverview(collaboratorId) {
                    this.selectedCollaborator = collaboratorId;
                    this.activeTab = 'commissions';
                    this.commissionTab = 'individual';
                },
                
                formatCurrency(value) {
                    return new Intl.NumberFormat('pt-BR', {
                        style: 'currency',
                        currency: 'BRL'
                    }).format(value);
                },
                
                formatDate(dateString) {
                    return new Date(dateString).toLocaleDateString('pt-BR');
                },
                
                getMonthName(monthNumber) {
                    const month = this.months.find(m => m.value === monthNumber);
                    return month ? month.label : '';
                },
                
                // Fun√ß√£o para calcular performance real
                calculatePerformance() {
                    if (this.goals.length === 0) return 0;
                    
                    const completedGoals = this.goals.filter(g => g.status === 'completed').length;
                    const totalGoals = this.goals.length;
                    
                    return Math.round((completedGoals / totalGoals) * 100);
                },
                
                // Fun√ß√£o para salvar dados no localStorage
                saveData() {
                    localStorage.setItem('metas_goals', JSON.stringify(this.goals));
                    localStorage.setItem('metas_collaborators', JSON.stringify(this.collaborators));
                    localStorage.setItem('metas_sectors', JSON.stringify(this.sectors));
                    localStorage.setItem('metas_renewals', JSON.stringify(this.renewals));
                },
                
                // Fun√ß√£o para resetar todos os dados
                resetAllData() {
                    if (confirm('Tem certeza que deseja resetar todos os dados? Isso ir√° remover todas as metas, colaboradores, setores e renova√ß√µes cadastradas.')) {
                        localStorage.removeItem('metas_goals');
                        localStorage.removeItem('metas_collaborators');
                        localStorage.removeItem('metas_sectors');
                        localStorage.removeItem('metas_renewals');
                        location.reload(); // Recarrega a p√°gina para voltar aos dados padr√£o
                    }
                },
                
                // Fun√ß√£o para carregar setores no select
                loadSectorsToSelect() {
                    const sectorSelect = document.getElementById('goalSector');
                    if (sectorSelect) {
                        sectorSelect.innerHTML = '<option value="">Selecione o setor</option>';
                        this.sectors.forEach(sector => {
                            const option = document.createElement('option');
                            option.value = sector.id;
                            option.textContent = sector.name;
                            sectorSelect.appendChild(option);
                        });
                    }
                },
                
                // Fun√ß√£o para carregar metas na lista
                loadGoals() {
                    const goalsContainer = document.querySelector('#goals-content .space-y-4');
                    if (goalsContainer) {
                        goalsContainer.innerHTML = '';
                        this.goals.forEach(goal => {
                            const goalElement = document.createElement('div');
                            goalElement.className = 'p-4 border border-gray-200 dark:border-gray-700 rounded-lg';
                            goalElement.innerHTML = `
                                <div class="flex items-center justify-between">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-3 h-3 rounded-full ${goal.status === 'completed' ? 'bg-green-500' : goal.status === 'in_progress' ? 'bg-yellow-500' : 'bg-red-500'}"></div>
                                            <div>
                                                <h5 class="font-medium text-gray-900 dark:text-gray-100">${goal.title}</h5>
                                                <p class="text-sm text-gray-500 dark:text-gray-400">${goal.description}</p>
                                            </div>
                                        </div>
                                        <div class="mt-2 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400">
                                            <span>Setor: ${this.getSectorName(goal.sectorId)}</span>
                                            <span>Tipo: ${goal.type}</span>
                                            <span>Prioridade: ${goal.priority}</span>
                                            <span>Meta: ${goal.target}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="text-right mr-4">
                                            <div class="text-sm font-medium text-gray-900 dark:text-gray-100">${goal.progress}%</div>
                                            <div class="w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${goal.progress}%"></div>
                                            </div>
                                        </div>
                                        <button onclick="metasApp.editGoal('${goal.id}')" class="text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 mr-2" title="Editar">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button onclick="metasApp.deleteGoal('${goal.id}')" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300" title="Excluir">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            `;
                            goalsContainer.appendChild(goalElement);
                        });
                    }
                },
                editCommission(commission) {
                    this.editingCommission = commission;
                    this.newRenewal = {
                        collaboratorId: commission.collaboratorId,
                        clientName: commission.clientName,
                        contractNumber: commission.contractNumber,
                        renewalDate: commission.renewalDate,
                        previousPlanValue: commission.previousPlan.value,
                        newPlanValue: commission.newPlan.value,
                        commissionType: commission.commissionType || ''
                    };
                },
                
                viewCommission(commission) {
                    this.viewingCommission = commission;
                },
                
                deleteCommission(commissionId) {
                    if (confirm('Tem certeza que deseja excluir esta comiss√£o?')) {
                        this.renewals = this.renewals.filter(r => r.id !== commissionId);
                        this.saveData();
                    }
                },
                
                cancelCommissionEdit() {
                    this.editingCommission = null;
                    this.newRenewal = {
                        collaboratorId: '',
                        clientName: '',
                        contractNumber: '',
                        renewalDate: '',
                        previousPlanValue: 0,
                        newPlanValue: 0,
                        commissionType: ''
                    };
                }
            }
            
            // Inicializar ap√≥s carregamento da p√°gina
            document.addEventListener('DOMContentLoaded', function() {
                metasApp.loadSectorsToSelect();
                metasApp.loadGoals();
            });
        }
    </script>
</body>
</html> 
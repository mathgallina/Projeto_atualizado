{% extends "base.html" %}

{% block title %}Criar Treinamento - Veloz Fibra{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900">
  <div class="flex">
    <!-- Sidebar Navigation -->
    <div class="w-64 bg-gray-800 border-r border-gray-700 min-h-screen">
      <div class="p-6">
        <h3 class="text-white font-semibold mb-4">Navegação</h3>
        <nav class="space-y-2">
          <a href="/" class="flex items-center text-gray-300 hover:text-white hover:bg-gray-700 px-3 py-2 rounded-lg transition-colors">
            <i class="fas fa-home mr-3"></i>
            Dashboard Principal
          </a>
          <a href="/documents/" class="flex items-center text-gray-300 hover:text-white hover:bg-gray-700 px-3 py-2 rounded-lg transition-colors">
            <i class="fas fa-file-contract mr-3"></i>
            Documentos
          </a>
          <a href="/goals/" class="flex items-center text-gray-300 hover:text-white hover:bg-gray-700 px-3 py-2 rounded-lg transition-colors">
            <i class="fas fa-bullseye mr-3"></i>
            Sistema de Metas
          </a>
          <a href="/trainings/" class="flex items-center text-white bg-blue-600 px-3 py-2 rounded-lg transition-colors">
            <i class="fas fa-graduation-cap mr-3"></i>
            Treinamentos Internos
          </a>
        </nav>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1">
      <!-- Header -->
      <header class="bg-gray-800 border-b border-gray-700">
        <div class="px-6 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-white">Criar Novo Treinamento</h1>
              <p class="text-gray-400">Adicione um novo treinamento para sua equipe</p>
            </div>
            <a href="/trainings/" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
              <i class="fas fa-arrow-left mr-2"></i>
              Voltar
            </a>
          </div>
        </div>
      </header>

      <!-- Content -->
      <main class="p-6">
        <div class="max-w-4xl mx-auto">
          <!-- Flash Messages -->
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              {% for category, message in messages %}
                <div class="mb-6 p-4 rounded-lg {% if category == 'success' %}bg-green-100 border border-green-400 text-green-700{% else %}bg-red-100 border border-red-400 text-red-700{% endif %}">
                  {{ message }}
                </div>
              {% endfor %}
            {% endif %}
          {% endwith %}

          <!-- Form -->
          <div class="bg-gray-800 rounded-lg p-8">
            <form method="POST" enctype="multipart/form-data" class="space-y-6">
              <!-- Informações Básicas -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-white font-medium mb-2">Título do Treinamento *</label>
                  <input 
                    type="text" 
                    name="title" 
                    required
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Ex: Instalação de Fibra Óptica"
                  >
                </div>
                
                <div>
                  <label class="block text-white font-medium mb-2">Categoria *</label>
                  <select 
                    name="category" 
                    required
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value="">Selecione uma categoria</option>
                    {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>

              <!-- Descrição -->
              <div>
                <label class="block text-white font-medium mb-2">Descrição *</label>
                <textarea 
                  name="description" 
                  required
                  rows="4"
                  class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="Descreva o conteúdo e objetivos do treinamento..."
                ></textarea>
              </div>

              <!-- Detalhes do Treinamento -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                  <label class="block text-white font-medium mb-2">Duração (minutos) *</label>
                  <input 
                    type="number" 
                    name="duration" 
                    required
                    min="1"
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="120"
                  >
                </div>
                
                <div>
                  <label class="block text-white font-medium mb-2">Nível de Dificuldade</label>
                  <select 
                    name="difficulty"
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value="beginner">Iniciante</option>
                    <option value="intermediate">Intermediário</option>
                    <option value="advanced">Avançado</option>
                  </select>
                </div>
                
                <div>
                  <label class="block text-white font-medium mb-2">Instrutor</label>
                  <input 
                    type="text" 
                    name="instructor"
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Nome do instrutor"
                  >
                </div>
              </div>

              <!-- URL do Vídeo -->
              <div>
                <label class="block text-white font-medium mb-2">URL do Vídeo (opcional)</label>
                <input 
                  type="url" 
                  name="video_url"
                  class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="https://example.com/video.mp4"
                >
              </div>

              <!-- Upload de Materiais -->
              <div>
                <label class="block text-white font-medium mb-2">Materiais de Apoio</label>
                <div class="border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                  <input 
                    type="file" 
                    name="materials" 
                    multiple
                    accept=".pdf,.doc,.docx,.txt,.mp4,.avi,.mov,.jpg,.jpeg,.png"
                    class="hidden"
                    id="materials-upload"
                  >
                  <label for="materials-upload" class="cursor-pointer">
                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                    <p class="text-gray-300 mb-2">Clique para selecionar arquivos</p>
                    <p class="text-gray-400 text-sm">PDF, DOC, TXT, MP4, AVI, MOV, JPG, PNG</p>
                  </label>
                </div>
                <div id="file-list" class="mt-4 space-y-2"></div>
              </div>

              <!-- Botões -->
              <div class="flex justify-end space-x-4 pt-6">
                <a 
                  href="/trainings/" 
                  class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors"
                >
                  Cancelar
                </a>
                <button 
                  type="submit"
                  class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium"
                >
                  <i class="fas fa-plus mr-2"></i>
                  Criar Treinamento
                </button>
              </div>
            </form>
          </div>
        </div>
      </main>
    </div>
  </div>
</div>

<script>
// Mostrar lista de arquivos selecionados
document.getElementById('materials-upload').addEventListener('change', function(e) {
  const fileList = document.getElementById('file-list');
  fileList.innerHTML = '';
  
  Array.from(e.target.files).forEach(file => {
    const fileItem = document.createElement('div');
    fileItem.className = 'flex items-center justify-between p-3 bg-gray-700 rounded-lg';
    fileItem.innerHTML = `
      <div class="flex items-center">
        <i class="fas fa-file mr-3 text-blue-400"></i>
        <span class="text-white">${file.name}</span>
      </div>
      <span class="text-gray-400 text-sm">${(file.size / 1024 / 1024).toFixed(2)} MB</span>
    `;
    fileList.appendChild(fileItem);
  });
});
</script>
{% endblock %} 